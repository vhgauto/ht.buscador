name: Proyecto HT.BUSCADOR
run-name: ${{ github.actor }} est√° generando tabla interactiva HT üéôÔ∏èüé¨
on: [push]
jobs:
  HT-BUSCADOR:
    runs-on: ubuntu-latest
    defaults:
      run:
        shell: bash -l {0}
    env:
        SPOTIPY_CLIENT_ID: ${{ secrets.SPOTIPY_CLIENT_ID }}
        SPOTIPY_CLIENT_SECRET: ${{ secrets.SPOTIPY_CLIENT_SECRET }}
        SPOTIPY_REFRESH_TOKEN: ${{ secrets.SPOTIPY_REFRESH_TOKEN }}
    steps:
      - run: echo "üéâ Tareas activadas autom√°ticamente debido a un evento ${{ github.event_name }}"
      - run: echo "üêß Las tareas est√°n corriendo en un servidor ${{ runner.os }} alojado en GitHub"
      - run: echo "üîé El nombre del branch es ${{ github.ref }} y su repositorio es ${{ github.repository }}"
      - name: Verificar el c√≥digo del repositorio
        uses: actions/checkout@v4
      - uses: conda-incubator/setup-miniconda@v3
        with:
          activate-environment: ht.buscador
          environment-file: environment.yml
          auto-activate-base: false
      - name: Creo sitio web
        run: scripts/principal.bash
      - name: Configuro git en el runner
        run: |
          git config --local user.email "noreply@github.com"
          git config --local user.name "GitHub"
      - name: Commit de los cambios en el repositorio
        run: |
          git add .
          git commit -m "sitio web generado con √∫ltimo valor estimado de turbidez"
          git push origin main
      - run: echo "‚úÖ El estado final es = ${{ job.status }}."
